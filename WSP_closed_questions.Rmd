---
title: "WSP closed question analysis"
author: "Lizzie Jones^[University of Brighton, l.jones4@brighton.ac.uk]"
date: "10/05/2021"
output:
  html_document:
    number_sections: yes
  pdf_document:
    number_sections: yes
  word_document: default
---

====================
WSP - Analysis, stats and visualisations for closed questions
====================

### About this rMarkdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>. To generate the document of all content, click the **Knit** button. 

This rMarkdown document will be periodically updated and uploaded to the OneDrive folder and pushed to the WSP GitHub code repository. The primary format of this document is HTML, but this can be easily changed by changing the output (e.g. PDF, GitHub) using the 'output' section at the top of the document. The possible output formats are listed here: https://rmarkdown.rstudio.com/lesson-9.html.


```{r setup/packages, include=FALSE}
# This code assumes that all packages are installed. If not, use 'install.packages' e.g. install.packages("likert")

# Key packages for data wrangling
wrangling <- c("dplyr","tidyverse","purr","magrittr","lubridate","hms",
             "data.table","plyr","tidyr","tibble","reshape2")
lapply(wrangling, require, character.only = TRUE) 

# Useful survey analysis packages
survey <- c("likert","careless")
lapply(survey, require, character.only = TRUE) 

# Useful packages for statistics
stats <- c("stats","ggpubr","lme4","MASS","car","psych",
                   "MuMIn","glmmTMB","nlme","DHARMa")
lapply(stats, require, character.only = TRUE) 

# Favourite data visualisation packages
vismap <- c("ggvis","htmlwidgets","maps", "lattice","ggmap","ggplot2","plotly","rnaturalearth",
            "RColorBrewer", "sjPlot", "ggrepel", "rgdal", "maptools", "gpclib")
lapply(vismap, require, character.only = TRUE) 
gpclibPermit()  # Gives maptool permission to use gpclib

```

```{r setup and column groups, include=FALSE}
# Load in working  directory and datasets
setwd("~/Documents/White-Stork-Project")
# Load in the data
original_data <- read.csv("Stork_MainDataset.csv", header = TRUE, stringsAsFactors=TRUE)
all_data <- read.csv("Stork_Dataset_Radapted.csv", header = TRUE, stringsAsFactors=TRUE)

# Load in cleaned dataset
final_data <- read.csv("WSP_R_cleaned_dataset.csv", header = TRUE, stringsAsFactors=TRUE)
# View cleaned dataset
summary(final_data)
### Create two dataframes: one for each data collection (Proactive survey and Nationally representative survey) for easier comparison
proact_data <- final_data[which(final_data$SurveyType == "Proactive"),]
natrep_data <- final_data[which(final_data$SurveyType == "NatRep"),]


### Grouping columns
# Grouping Likert scale question columns by selecting Question numbers (and dropping scores or open questions)
overall_score_colnames <- select(final_data, ends_with("overallscore"))

Q4_knowledge_colnames <- select(final_data, starts_with("Q4"), -ends_with('score'))
Q5_diet_colnames <- select(final_data, starts_with("Q5"))
Q6_habitat_colnames <- select(final_data, starts_with("Q6"))
Q8_nesting_colnames <- select(final_data, ends_with("nesting"))
Q8_seen_colnames <- select(final_data, starts_with("Q8_"))

# Source of information (current and preferred)
Q10_cursource_colnames <- select(final_data, starts_with("Q10a"))
Q10_prefsource_colnames <- select(final_data, starts_with("Q10b"))

# Q12-14 = attitudes to white storks
all_attitude_colnames <- select(final_data, starts_with("Q13"), starts_with("Q13"), starts_with("Q14"), -ends_with('score'))
Q12_attitude_colnames <- select(final_data, starts_with("Q12"), -ends_with('score'))
Q13_attitude_colnames <- select(final_data, starts_with("Q13"), -ends_with('score'))
Q14_attitude_colnames <- select(final_data, starts_with("Q14"), -ends_with('score'))

## Q15 = WSP support
## Q16 = Views on current management
Q17_management_colnames <- select(final_data, starts_with("Q17"), -ends_with('open'))
Q18_exp_colnames <- select(final_data, starts_with("Q18_"), -ends_with('open')) # Frequency of
Q19_NCI_colnames <- select(final_data, starts_with("Q19"), -ends_with('score')) # Q19 total score = NCI
Q20_envconcern_colnames <- select(final_data, starts_with("Q20"), -ends_with('score')) # Q21 total score = Env.concern score
Q21_ProCoBS_colnames <- select(final_data, starts_with("Q21"), -ends_with('score')) # Q21 total score = ProCoBS
Q23_BIS_colnames <- select(final_data, starts_with("Q23"), -ends_with('score')) # Q23 total score = BirdInterestScore
```




